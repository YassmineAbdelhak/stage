{"ast":null,"code":"import axios from \"axios\";\nexport const getAllProducts = () => dispatch => {\n  dispatch({\n    type: \"GET_PRODUCTS_REQUEST\"\n  });\n  axios.get(\"/api/products/allproducts\").then(res => {\n    console.log(res);\n    dispatch({\n      type: \"GET_PRODUCTS_SUCCESS\",\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n    dispatch({\n      type: \"GET_PRODUCTS_FAILED\",\n      payload: err\n    });\n  });\n};\nexport const getProductById = productid => dispatch => {\n  dispatch({\n    type: \"GET_PRODUCTBYID_REQUEST\"\n  });\n  axios.post(\"/api/products/getproductbyid\", {\n    productid\n  }).then(res => {\n    console.log(res);\n    dispatch({\n      type: \"GET_PRODUCTBYID_SUCCESS\",\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(err);\n    dispatch({\n      type: \"GET_PRODUCTBY_FAILED\",\n      payload: err\n    });\n  });\n};\nexport const filtreProducts = (searchkey, category) => dispatch => {\n  var filtredproducts;\n  dispatch({\n    type: \"GET_PRODUCTS_REQUEST\"\n  });\n  axios.get(\"/api/products/allproducts\").then(res => {\n    filtredproducts = res.data;\n\n    if (searchkey) {\n      filtredproducts = res.data.filter(product => {\n        return product.name.toLowerCase().includes(searchkey);\n      });\n    }\n\n    if (category.toLowerCase() !== \"all\") {\n      filtredproducts = res.data.filter(product => {\n        return product.category.toLowerCase().includes(category.toLowerCase());\n      });\n    }\n\n    dispatch({\n      type: \"GET_PRODUCTS_SUCCESS\",\n      payload: filtredproducts\n    });\n  }).catch(err => {\n    dispatch({\n      type: \"GET_PRODUCTS_FAILED\"\n    });\n  });\n};\nexport const addProductReview = (review, productid) => (dispatch, getState) => {\n  dispatch({\n    type: \"ADD_PRODUCT_REVIEW_REQUEST\"\n  });\n  const currentUser = getState().loginReducer.currentUser;\n  axios.post(\"/api/products/addreview\", {\n    review,\n    productid,\n    currentUser\n  }).then(res => {\n    console.log(res);\n    dispatch({\n      type: \"ADD_PRODUCT_REVIEW_SUCCESS\"\n    });\n    window.location.reload();\n  }).catch(err => {\n    dispatch({\n      type: \"ADD_PRODUCT_REVIEW_FAILED\"\n    });\n  });\n};\nexport const deleteProduct = productid => dispatch => {\n  dispatch({\n    type: \"DELETE_PRODUCT_REQUEST\"\n  });\n  axios.post(\"/api/products/deleteproduct\", {\n    productid\n  }).then(res => {\n    dispatch({\n      type: \"DELETE_PRODUCT_SUCCESS\",\n      payload: res.data\n    });\n    window.location.reload();\n  }).catch(err => {\n    dispatch({\n      type: \"DELETE_PRODUCT_FAILED\",\n      payload: err\n    });\n  });\n};\nexport const addProduct = product => dispatch => {\n  dispatch({\n    type: \"ADD_PRODUCT_REQUEST\"\n  });\n  axios.post(\"/api/products/addproduct\", {\n    product\n  }).then(res => {\n    console.log(res);\n    dispatch({\n      type: \"ADD_PRODUCT_SUCCESS\"\n    });\n    window.location.reload();\n  }).catch(err => {\n    dispatch({\n      type: \"ADD_PRODUCT_FAILED\",\n      payload: err\n    });\n  });\n};\nexport const updateProduct = (productid, updatedproduct) => dispatch => {\n  dispatch({\n    type: \"UPDATE_PRODUCT_REQUEST\"\n  });\n  axios.post(\"/api/products/updateproduct\", {\n    productid,\n    updatedproduct\n  }).then(res => {\n    console.log(res);\n    dispatch({\n      type: \"UPDATE_PRODUCT_SUCCESS\"\n    });\n    window.location.href = \"/admin/productslist\";\n  }).catch(err => {\n    dispatch({\n      type: \"UPDATE_PRODUCT_FAILED\"\n    });\n  });\n};","map":{"version":3,"sources":["C:/Users/Chayma/Desktop/my-app/client/src/actions/productAction.js"],"names":["axios","getAllProducts","dispatch","type","get","then","res","console","log","payload","data","catch","err","getProductById","productid","post","filtreProducts","searchkey","category","filtredproducts","filter","product","name","toLowerCase","includes","addProductReview","review","getState","currentUser","loginReducer","window","location","reload","deleteProduct","addProduct","updateProduct","updatedproduct","href"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const getAllProducts = () => (dispatch) => {\r\n  dispatch({ type: \"GET_PRODUCTS_REQUEST\" });\r\n\r\n  axios\r\n    .get(\"/api/products/allproducts\")\r\n    .then((res) => {\r\n      console.log(res);\r\n\r\n      dispatch({ type: \"GET_PRODUCTS_SUCCESS\", payload: res.data });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      dispatch({ type: \"GET_PRODUCTS_FAILED\", payload: err });\r\n    });\r\n};\r\n\r\nexport const getProductById = (productid) => (dispatch) => {\r\n  dispatch({ type: \"GET_PRODUCTBYID_REQUEST\" });\r\n\r\n  axios\r\n    .post(\"/api/products/getproductbyid\", { productid })\r\n    .then((res) => {\r\n      console.log(res);\r\n\r\n      dispatch({ type: \"GET_PRODUCTBYID_SUCCESS\", payload: res.data });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      dispatch({ type: \"GET_PRODUCTBY_FAILED\", payload: err });\r\n    });\r\n};\r\n\r\nexport const filtreProducts = (searchkey, category) => (dispatch) => {\r\n  var filtredproducts;\r\n\r\n  dispatch({ type: \"GET_PRODUCTS_REQUEST\" });\r\n  axios\r\n    .get(\"/api/products/allproducts\")\r\n    .then((res) => {\r\n      filtredproducts = res.data;\r\n\r\n      if (searchkey) {\r\n        filtredproducts = res.data.filter((product) => {\r\n          return product.name.toLowerCase().includes(searchkey);\r\n        });\r\n      }\r\n\r\n      if (category.toLowerCase() !== \"all\") {\r\n        filtredproducts = res.data.filter((product) => {\r\n          return product.category\r\n            .toLowerCase()\r\n            .includes(category.toLowerCase());\r\n        });\r\n      }\r\n\r\n      dispatch({ type: \"GET_PRODUCTS_SUCCESS\", payload: filtredproducts });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({ type: \"GET_PRODUCTS_FAILED\" });\r\n    });\r\n};\r\n\r\nexport const addProductReview = (review, productid) => (dispatch, getState) => {\r\n  dispatch({ type: \"ADD_PRODUCT_REVIEW_REQUEST\" });\r\n  const currentUser = getState().loginReducer.currentUser;\r\n  axios\r\n    .post(\"/api/products/addreview\", { review, productid, currentUser })\r\n    .then((res) => {\r\n      console.log(res);\r\n      dispatch({ type: \"ADD_PRODUCT_REVIEW_SUCCESS\" });\r\n\r\n      window.location.reload();\r\n    })\r\n    .catch((err) => {\r\n      dispatch({ type: \"ADD_PRODUCT_REVIEW_FAILED\" });\r\n    });\r\n};\r\n\r\nexport const deleteProduct = (productid) => (dispatch) => {\r\n  dispatch({ type: \"DELETE_PRODUCT_REQUEST\" });\r\n\r\n  axios\r\n    .post(\"/api/products/deleteproduct\", { productid })\r\n    .then((res) => {\r\n      dispatch({ type: \"DELETE_PRODUCT_SUCCESS\", payload: res.data });\r\n      window.location.reload();\r\n    })\r\n    .catch((err) => {\r\n      dispatch({ type: \"DELETE_PRODUCT_FAILED\", payload: err });\r\n    });\r\n};\r\n\r\nexport const addProduct = (product) => (dispatch) => {\r\n  dispatch({ type: \"ADD_PRODUCT_REQUEST\" });\r\n\r\n  axios\r\n    .post(\"/api/products/addproduct\", { product })\r\n    .then((res) => {\r\n      console.log(res);\r\n      dispatch({ type: \"ADD_PRODUCT_SUCCESS\" });\r\n      window.location.reload()\r\n    })\r\n    .catch((err) => {\r\n      dispatch({ type: \"ADD_PRODUCT_FAILED\", payload: err });\r\n    });\r\n};\r\n\r\nexport const updateProduct = (productid, updatedproduct) => (dispatch) => {\r\n  dispatch({ type: \"UPDATE_PRODUCT_REQUEST\" });\r\n\r\n  axios\r\n    .post(\"/api/products/updateproduct\", { productid, updatedproduct })\r\n    .then((res) => {\r\n      console.log(res);\r\n      dispatch({ type: \"UPDATE_PRODUCT_SUCCESS\" });\r\n\r\n      window.location.href = \"/admin/productslist\";\r\n    })\r\n    .catch((err) => {\r\n      dispatch({ type: \"UPDATE_PRODUCT_FAILED\" });\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}